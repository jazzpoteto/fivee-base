/* ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
 *
 * Fivee-base
 * ver.1.4.0 / 2016.3.24
 * http://plain-web.com/fivee-base/apps/
 * Released under MIT license. Copyright 2016 Yusuke Maruyama.
 *
 * ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ */
$(function(){function s(){var s=0,e=0;return r.each(function(){s+=$(this).outerHeight(!0),e++}),s}function e(s,e){return u=$(s).attr("class"),u=u.split(" "),u=$.grep(u,function(s,t){return s.indexOf(e)>=0}),f="."+u}function t(s){R.push(s),D!==!1&&clearTimeout(D),D=setTimeout(function(){var s=R[R.length-1];return"off"!==s?!1:(N.hide(300,function(){$(this).removeClass("is-show"),P.css({top:0,left:0})}),void(R=[]))},500)}function a(s){var e=s.offset(),t=$(window).outerWidth(!0),a=e.top,o=e.left,i=s.find(".js-tooltip-key").text();O.text("").text(i),N.show();var n=O.outerWidth(!0),l=O.outerHeight(!0),r=n+o,c=r-t;U.css("margin-left",""),r>t&&(o-=c,U.css("margin-left",c)),P.css({top:a-l-7,left:o}),N.addClass("is-show")}function o(){return Hs=Us.offset(),Ls=$(document).outerHeight()-Hs.top}function i(){Rs=$(document).outerHeight(),Ds=$(window).outerHeight(),Ns=Rs-Ds,Ws=Ns-$(window).scrollTop(),console.log(Rs,Ds),Us.length?(Ls=o(),n()):l()}function n(){Ws=Ns-$(window).scrollTop(),Ls>=Ws&&(Ws=Ls),Ps.stop().animate({bottom:Ws},Os)}function l(){Ws=Ns-$(window).scrollTop(),Ps.stop().animate({bottom:Ws},Os)}$(window).scroll(function(){var s=$(document).scrollTop(),e=$(".js-scrolltop");s>600?e.fadeIn(600):e.fadeOut(400)});var r=$(".js-posi-remove");r.length?pageTopRemoveVal=s():pageTopRemoveVal=0,$("a[href*=#]:not([href=#])").on("click",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var s=$(this.hash);s=s.length?s:$("[name="+this.hash.slice(1)+"]");var e=s.offset();if(s.length)return $("html,body").animate({scrollTop:e.top-pageTopRemoveVal},1e3),!1}}),$("#js-pageTop").on("click",function(){$("html,body").animate({scrollTop:0},1e3)});var c,d,f,u,h=$("#js-eql");if(h.length){var p=$(".js-eql-width"),m=$(".js-eql-height");if(p.length){var v=[];if(p){$(p).each(function(s){var e=$(p).eq(s).outerWidth(!0);v.push(e)});var j=Math.max.apply(null,v);$(p).width(j)}}if(m.length){var C=[];if(m){$(m).each(function(s){var e=$(m).eq(s).outerHeight(!0);C.push(e)});var j=Math.max.apply(null,C);$(m).height(j)}}}$(".js-nav-main a").on("click",function(){var s=$(this).parents(".js-nav-main"),t=$(this).parent("li"),a=t.attr("class");if(a){var o=a.match("parent");if(o){c=t,d="js-nav-main-parent",f=e(c,d),f=f.replace("parent","child");var i=$(this).find(".js-ic-arrow").children(),n=$(this).find(".js-ic-folder").children(),l=$(this).find(".js-ic-folder-arrow").children(),r=i.attr("class"),u=n.attr("class"),h=l.attr("class"),p=s.find(f).is(":visible");p?(s.find(f).hide(100),t.removeClass("is-open"),r&&(r=r.replace("up","down"),$(i).removeClass().addClass(r)),u&&(u=u.replace("folder-open","folder"),$(n).removeClass().addClass(u)),h&&(h=h.replace("down","right"),$(l).removeClass().addClass(h))):(s.find(f).show(300),t.addClass("is-open"),r&&(r=r.replace("down","up"),$(i).removeClass().addClass(r)),u&&(u=u.replace("folder","folder-open"),$(n).removeClass().addClass(u)),h&&(h=h.replace("right","down"),$(l).removeClass().addClass(h)))}}else s.find("li").removeClass("is-current"),t.addClass("is-current")});var g=$(".js-nav-main");if(g.length){var w=$(".js-nav-main .is-current").parents("ul");w.parent("li").addClass("is-open");var b=w.attr("class");if(b){var k=b.match("child");if(k){w.show(100);var x=w.parents("li"),T=x.find(".js-ic-arrow").children(),y=x.find(".js-ic-folder").children(),q=x.find(".js-ic-folder-arrow").children(),S=T.attr("class"),W=y.attr("class"),H=q.attr("class");S&&(S=S.replace("down","up"),$(T).removeClass().addClass(S)),W&&(W=W.replace("folder","folder-open"),$(y).removeClass().addClass(W)),H&&(H=H.replace("right","down"),$(q).removeClass().addClass(H))}}}var L="off",R=[],D=!1,N=$(".js-tooltip"),O=$(".js-tooltip-wrap"),P=$(".js-tooltip > .st-body"),U=$(".js-balloon");$(".js-tooltip-hover").on({mouseenter:function(){var s=$(this);a(s),L="on",t(L)},mouseleave:function(){L="off",t(L)}}),N.on({mouseenter:function(){L="on",t(L)},mouseleave:function(){L="off",t(L)}});var V,z,M,A,I,B,E,F,G,J,K,Q=0,X=".js-popup-open",Y=".js-popup-close",Z=".js-popup-open, .js-popup, .js-bookmark-open",_=".js-popup",ss=".js-popup-arrow",es="is-on",ts="js-posi-fix",as=0,os=7,is=20;$(X).on("click",function(){V=$(this),V.hasClass(es)?$(_).hide(function(){$(X+"."+es).removeClass(es)}):($(X+"."+es).removeClass(es),V.addClass(es),d="js-tpl",ns.popupPosi(V,d))});var ns={popupPosi:function(s,t){z=$(window).outerWidth(!0),M=s.offset(),A=M.top,A=A+s.outerHeight(!0)+7,I=s.outerWidth(!0),B=M.left,c=s,t=t,f=e(c,t),ns.popupShow(A,B,f)},popupShow:function(s,e,t){$(_+" > .st-body").removeClass("is-current"),$(_+" "+t).addClass("is-current"),$(_).css({opacity:"0",display:"block"}),J=$(_+" "+t).outerWidth(!0),K=e+J,F=I/2,I>J&&(F=is),K>=z&&(E=K-z+os,e-=E,F+=E),os>e&&(e=os),is>F&&(F=is),G=$(_+" "+t).hasClass(ts),G?(s-=$(window).scrollTop(),e+=$(window).scrollLeft(),$(_+" "+t).css({position:"",top:"",left:"",right:""}).css({position:"fixed",top:s,bottom:"auto",right:"auto",left:e})):$(_+" "+t).css({position:"",top:"",left:"",right:""}).css({top:s,bottom:"auto",right:"auto",left:e}),$(ss).css("left","").css("left",F),$(_).fadeTo(as,1,function(){Q++,1===Q&&$(document).on("click",function(s){var e=$(s.target).closest(Z).length;return e||($(_).hide(),$(X+"."+es).removeClass(es),Q=0,$(this).off()),!1})})}};$(Y).on("click",function(){$(_).hide(function(){$(X+"."+es).removeClass(es)})});var ls=0;$(".js-bookmark-open").on("click",function(){var s=$(this).children("i");if(ls++,1===ls&&s.removeClass("fa-star-o").addClass("fa-star"),2===ls){s.removeClass("fa-star").addClass("fa-star-o");var e=$(this);d="js-tpl",ls=0,ns.popupPosi(e,d)}}),$(".js-modal-open").on("click",function(){c=$(this),d="js-tpl",f=e(c,d);var s=$(".js-modal"),t=$(".js-modal "+f);$(".js-modal > .st-body").removeClass("is-current").css("margin-left",""),t.addClass("is-current");var a=t.outerWidth()/2;t.css("margin-left",-a),s.show(),$(".js-cartain").show(),$(".js-modal-close, .js-cartain").on("click",function(){s.hide(),$(".js-cartain").hide()})}),$(".js-message-open").on("click",function(){c=$(this),d="js-tpl",f=e(c,d),$(".js-message > .st-body").removeClass("is-open"),$(".js-message > "+f).addClass("is-open")}),$(".js-message-close").on("click",function(){$(".js-message > .st-body").removeClass("is-open")}),$(".js-toast-open").on("click",function(){c=$(this),d="js-tpl",f=e(c,d),clearTimeout(t);var s=$(".js-toast > "+f).css("margin-left","").show().outerWidth(!0)/2;$(".js-toast > "+f).css("margin-left",-s);var t;t=setTimeout(function(){$(".js-toast > "+f).fadeOut(700)},4e3),$(".js-toast-close").on("click",function(){$(".js-toast > "+f).hide(),clearTimeout(t)})}),$(".js-loader-on").on("click",function(){$(".js-loader").show()}),$(".js-loader-off").on("click",function(){$(".js-loader").hide()}),$(".js-loader-abs-on").on("click",function(){var s=$(this).offset(),e=s.top,t=s.left;$(".js-loader-abs > .st-body").css({top:"",left:""}).css({top:e,left:t}),$(".js-loader-abs").show()}),$(".js-loader-abs-off").on("click",function(){$(".js-loader-abs").hide()}),$(".js-collapse").on("click",function(){c=$(this),d="js-collapse-parent",f=e(c,d),f=f.replace("js-collapse-parent","js-collapse-child"),$(f).slideToggle();var s=$(this).children(),t=s.attr("class");if(t.match("down"))t=t.replace("down","up"),s.removeClass().addClass(t);else{if(!t.match("up"))return!1;t=t.replace("up","down"),s.removeClass().addClass(t)}}),$(".js-collapse-slide").on("click",function(){c=$(this),d="js-collapse-slide-parent",f=e(c,d),f=f.replace("js-collapse-slide-parent","js-collapse-slide-child"),$(f).stop().animate({width:"toggle"},300);var s=$(this).children(),t=s.attr("class");if(t.match("left"))t=t.replace("left","right"),s.removeClass().addClass(t);else{if(!t.match("right"))return!1;t=t.replace("right","left"),s.removeClass().addClass(t)}}),$(".js-tab-select > li").on("click",function(){var s=$(this).parents(".js-tab"),e=$(s).find(".js-tab-select").children("li"),t=$(s).find(".js-tab-content").children("li");e.removeClass("is-current"),$(this).addClass("is-current");var a=$(this).index();t.removeClass("is-current"),t.eq(a).addClass("is-current")}),$(".js-tab-scroll-select > li").on("click",function(){var s=$(this).parents(".js-tab-scroll"),e=$(s).find(".js-tab-scroll-select").children("li"),t=$(s).find(".js-tab-scroll-content").children("li");e.removeClass("is-current"),$(this).addClass("is-current");var a=$(this).index();t.removeClass("is-current"),t.eq(a).addClass("is-current")});var rs=$(".js-tab-scroll"),cs=rs.length,ds=$(".js-tab-scroll-select"),fs=$(".js-tab-scroll-select > li:visible"),us="is-disable",hs=$(".js-tab-arrow-right"),ps=$(".js-tab-arrow-right"),$s=$(".js-tab-arrow-left"),ms=$(".js-tab-arrow-left"),vs=400,js=74,Cs=!1,gs=!1,ws=!1,bs={tabSetStart:function(){var s=rs.outerWidth(!0),e=s-js;ds.width(bs.tabWidthSum());var t=bs.tabWidthSum();return t>e?(ks=t-e,ps.removeClass(us),ks):(ps.addClass(us),ms.addClass(us),ks=0)},tabSetReset:function(){ds.animate({left:0},0,function(){ks=bs.tabSetStart(),Cs=!0,ms.addClass(us)})},tabWidthSum:function(){var s=fs.length,e=0,t=0;return fs.each(function(){e+=$(this).outerWidth(!0),t++,t===s&&(e+=7)}),e}};if(cs){var ks=bs.tabSetStart(),xs=!1;$(window).resize(function(){xs||clearTimeout(xs),xs=setTimeout(function(){bs.tabSetReset()},40)}),hs.on("click",function(){if(gs)return!1;gs=!0;var s=-ks,e=ds.position();return e=e.left,e===s?(gs=!1,!1):(ms.removeClass(us),e-=vs,Cs===!0&&(e=-vs,Cs=!1),s>e&&(moveDiff=e-s,e-=moveDiff),void ds.animate({left:e},400,function(){gs=!1,e===s&&ps.addClass(us)}))}),$s.on("click",function(){if(ws)return!1;ws=!0;var s=0,e=ds.position();return e=e.left,e===s?(ws=!1,!1):(ps.removeClass(us),e+=vs,Cs===!0&&(e=vs,Cs=!1),e>s&&(moveDiff=e-s,e-=moveDiff),void ds.animate({left:e},400,function(){ws=!1,e===s&&ms.addClass(us)}))})}$(".js-select-tr tr").on("click",function(){$(this).toggleClass("is-select")}),$(".js-col a").on("click",function(){var s=$(this).parents("li").index();$(".js-col-on colgroup col").removeClass("is-focus"),$(".js-col-on colgroup col").eq(s).addClass("is-focus")}),$(".js-sameclass td, .js-sameclass th").on({mouseenter:function(){var s="js-sameclass-num",t=$(this).attr("class");t&&t.match(s)&&(c=$(this),d=s,e(c,d),$(f).addClass("is-focus"))},mouseleave:function(){$(this).parents(".js-sameclass").find(".is-focus").removeClass("is-focus")}}),$(".js-check input").on("change",function(){var s=$(this).attr("class");if(s){var t=s.match("parent"),a=s.match("child");if(t){var o=$(this),i="js-check-parent-num",n=e(o,i);n=n.replace("parent","child");var l=$(this).prop("checked");l?$(n).prop("checked",!0):$(n).prop("checked",!1),Ts.trHightLight(n)}if(a){var o=$(this),i="js-check-child-num",n=e(o,i);Ts.trHightLight(n)}}});var Ts={trHightLight:function(s){$("input"+s).parents("tr").removeClass("is-highlight"),$("input"+s+":checked").parents("tr").addClass("is-highlight")}},ys=[],qs=[];$(".js-html-show").on("click",function(){c=$(this),d="js-example-num",f=e(c,d);var s="../doc/"+f.replace(".js-example-num","")+".txt",t=f.slice(0,23).replace(".js-example-num",".js-example-tag-num"),a=$.inArray(f,ys),o=ys[ys.length-1],i=qs[qs.length-1];$.ajax({url:s,dataType:"text",success:function(s){var e=s.replace(/\r\n/g,"\n");-1===a?($(t+" textarea").text("").text(e),$(t).show(300),ys=[],ys.push(f)):f!==o?($(t+" textarea").text("").text(e),ys.push(f)):($(t).hide(300),ys=[]),t!==i&&($(i).hide(300),qs=[],qs.push(t))}})}),$(".js-nav-block a").on("click",function(){var s=$(this).parents(".js-nav-block");c=s,d="js-nav-block-select";var t=e(c,d);t=t.replace("select","content");var a=$(this).parent("li");s.find("li").removeClass("is-current"),a.addClass("is-current");var o=a.attr("class");if(o){var i=o.match("parent");i&&(c=a,d="js-nav-block-parent",f=e(c,d),f=f.replace("parent","child"),$(t).find("ul:eq(0)").children("li").hide(),$(t).find(f).fadeToggle())}}),$(".js-pagination li a").on("click",function(){var s=$(this).parents("li").hasClass("js-notouch");s||($(".js-pagination li").removeClass("is-current"),$(this).parent("li").addClass("is-current"))});var Ss=$("#js-promo-footer");if(Ss.length){var Ws,Hs,Ls,Rs,Ds,Ns,xs,Ls,Os=300,Ps=$("#js-promo-footer > .st-body"),Us=$(".js-page-footer");xs=!1,$(window).resize(function(){xs||clearTimeout(xs),xs=setTimeout(function(){i()},40)}),Us.length?$(window).scroll(function(){Ls=o(),n()}):$(window).scroll(function(){l()}),i()}var Vs,zs,Ms=$(".js-remover-tri"),As=".js-remover",Is=400;Ms.on("click",function(){Vs=$(this).parents(As),parentNameUl=Vs.get(0).tagName,"UL"===parentNameUl&&(zs=$(this).parents("li"),zs.addClass("is-remove"),Vs.find(".is-remove").hide(Is))});var Bs=0;$(".js-aside-main-open").on("click",function(){Bs++,1===Bs&&($(".js-aside-main").addClass("is-transition").delay(500).addClass("is-open"),$(".js-page-contents:not(.js-aside-main)").on("click",function(){$(".js-aside-main").removeClass("is-open").delay(1e3).queue(function(){$(this).removeClass("is-transition").dequeue()}),Bs=0,$(this).off()})),2===Bs&&($(".js-aside-main").removeClass("is-open").delay(1e3).queue(function(){$(this).removeClass("is-transition").dequeue()}),Bs=0)});var Es=0;$(".js-nav-slide-open").on("click",function(){Es++,1===Es&&($(".js-nav-slide").addClass("is-transition").delay(500).addClass("is-open"),$(".js-page-contents:not(.js-nav-slide)").on("click",function(){$(".js-nav-slide").removeClass("is-open").delay(1e3).queue(function(){$(this).removeClass("is-transition").dequeue()}),Es=0,$(this).off()})),2===Es&&($(".js-nav-slide").removeClass("is-open").delay(1e3).queue(function(){$(this).removeClass("is-transition").dequeue()}),Es=0)})});