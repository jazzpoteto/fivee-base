/* ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■
 *
 * Fivee-base
 * ver.1.3.0 / 2016.3.8
 * http://plain-web.com/fivee-base/apps/
 * Released under MIT license. Copyright 2016 Yusuke Maruyama.
 *
 * ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ */
$(function(){function s(){var s=0,e=0;return c.each(function(){s+=$(this).outerHeight(!0),e++}),s}function e(s,e){return f=$(s).attr("class"),f=f.split(" "),f=$.grep(f,function(s,t){return s.indexOf(e)>=0}),u="."+f}function t(s){P.push(s),R!==!1&&clearTimeout(R),R=setTimeout(function(){var s=P[P.length-1];return"off"!==s?!1:(D.hide(300,function(){$(this).removeClass("is-show"),V.css({top:0,left:0})}),void(P=[]))},500)}function o(s){var e=s.offset(),t=$(window).outerWidth(!0),o=e.top,a=e.left,i=s.find(".js-tooltip-key").text();L.text("").text(i),D.show();var n=L.outerWidth(!0),l=L.outerHeight(!0),r=n+a,c=r-t;z.css("margin-left",""),r>t&&(a-=c,z.css("margin-left",c)),V.css({top:o-l-7,left:a}),D.addClass("is-show")}function a(){$(".js-popup").show(100,function(){A="popupOpen",E.push(A)}),B.on("click",function(){I=E[E.length-1],"popupOpen"===I&&($(".js-popup").hide(100),E=["off"],$(this).off())})}function i(){return fs=Cs.offset(),hs=$(document).outerHeight()-fs.top}function n(){$s=$(document).outerHeight(),ms=$(window).outerHeight(),vs=$s-ms,us=vs-$(window).scrollTop(),console.log($s,ms),Cs.length?(hs=i(),l()):r()}function l(){us=vs-$(window).scrollTop(),hs>=us&&(us=hs),gs.stop().animate({bottom:us},js)}function r(){us=vs-$(window).scrollTop(),gs.stop().animate({bottom:us},js)}$(window).scroll(function(){var s=$(document).scrollTop(),e=$(".js-scrolltop");s>600?e.fadeIn(600):e.fadeOut(400)});var c=$(".js-posi-remove");c.length?pageTopRemoveVal=s():pageTopRemoveVal=0,$("a[href*=#]:not([href=#])").on("click",function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var s=$(this.hash);s=s.length?s:$("[name="+this.hash.slice(1)+"]");var e=s.offset();if(s.length)return $("html,body").animate({scrollTop:e.top-pageTopRemoveVal},1e3),!1}}),$("#js-pageTop").on("click",function(){$("html,body").animate({scrollTop:0},1e3)});var p,d,u,f,h=$("#js-eql");if(h.length){var m=$(".js-eql-width"),v=$(".js-eql-height");if(m.length){var j=[];if(m){$(m).each(function(s){var e=$(m).eq(s).outerWidth(!0);j.push(e)});var g=Math.max.apply(null,j);$(m).width(g)}}if(v.length){var C=[];if(v){$(v).each(function(s){var e=$(v).eq(s).outerHeight(!0);C.push(e)});var g=Math.max.apply(null,C);$(v).height(g)}}}$(".js-nav-main a").on("click",function(){var s=$(this).parents(".js-nav-main"),t=$(this).parent("li"),o=t.attr("class");if(o){var a=o.match("parent");if(a){p=t,d="js-nav-main-parent",u=e(p,d),u=u.replace("parent","child");var i=$(this).find(".js-ic-arrow").children(),n=$(this).find(".js-ic-folder").children(),l=$(this).find(".js-ic-folder-arrow").children(),r=i.attr("class"),c=n.attr("class"),f=l.attr("class"),h=s.find(u).is(":visible");h?(s.find(u).hide(100),r&&(r=r.replace("up","down"),$(i).removeClass().addClass(r)),c&&(c=c.replace("folder-open","folder"),$(n).removeClass().addClass(c)),f&&(f=f.replace("down","right"),$(l).removeClass().addClass(f))):(s.find(u).show(300),r&&(r=r.replace("down","up"),$(i).removeClass().addClass(r)),c&&(c=c.replace("folder","folder-open"),$(n).removeClass().addClass(c)),f&&(f=f.replace("right","down"),$(l).removeClass().addClass(f)))}}else s.find("li").removeClass("is-current"),t.addClass("is-current")});var w=$(".js-nav-main .is-current").parents("ul"),b=w.attr("class");if(b){var k=b.match("child");if(k){w.show(100);var x=w.parents("li"),T=x.find(".js-ic-arrow").children(),y=x.find(".js-ic-folder").children(),q=x.find(".js-ic-folder-arrow").children(),S=T.attr("class"),W=y.attr("class"),H=q.attr("class");S&&(S=S.replace("down","up"),$(T).removeClass().addClass(S)),W&&(W=W.replace("folder","folder-open"),$(y).removeClass().addClass(W)),H&&(H=H.replace("right","down"),$(q).removeClass().addClass(H))}}var O="off",P=[],R=!1,D=$(".js-tooltip"),L=$(".js-tooltip-wrap"),V=$(".js-tooltip > .st-body"),z=$(".js-balloon");$(".js-tooltip-hover").on({mouseenter:function(){var s=$(this);o(s),O="on",t(O)},mouseleave:function(){O="off",t(O)}}),D.on({mouseenter:function(){O="on",t(O)},mouseleave:function(){O="off",t(O)}});var M=0;$(".js-bookmark-open").on("click",function(){var s=$(this).children("i");if(M++,1===M&&s.removeClass("fa-star-o").addClass("fa-star"),2===M){s.removeClass("fa-star").addClass("fa-star-o");var e=$(this);d="js-tpl",F.popupPosi(e,d),M=0}});var A,I,B=$("body"),E=["off"];$(".js-popup-open").on("click",function(){if(I=E[E.length-1],"off"===I){var s=$(this);d="js-tpl",F.popupPosi(s,d)}});var F={popupPosi:function(s,t){var o=$(window).outerWidth(!0),a=s.offset(),i=a.top;i=i+s.outerHeight(!0)+7;var n=s.outerWidth(!0),l=o-a.left-n;p=s,t=t,u=e(p,t),F.popupShow(i,l,u)},popupShow:function(s,e,t){$(".js-popup > .st-body").removeClass("is-current"),$(".js-popup "+t).addClass("is-current");var o=$(".js-popup "+t).hasClass("js-posi-fix");o?(s-=$(window).scrollTop(),e+=$(window).scrollLeft(),$(".js-popup "+t).css({position:"",top:"",left:"",right:""}).css({position:"fixed",top:s,bottom:"auto",right:e,left:"auto"})):$(".js-popup "+t).css({position:"",top:"",left:"",right:""}).css({top:s,bottom:"auto",right:e,left:"auto"}),a()}};$(".js-popup-inset-open").on("click",function(){if(I=E[E.length-1],"off"===I){var s=$(this);d="js-tpl",G.popupPosi(s,d)}});var G={popupPosi:function(s,t){var o=s.offset(),a=o.top;a+=s.outerHeight(!0),p=s,t=t,u=e(p,t),G.popupShow(a,u)},popupShow:function(s,e){$(".js-popup > .st-body").removeClass("is-current"),$(".js-popup "+e).addClass("is-current");var t=$(".js-popup "+e).hasClass("js-posi-fix");t?(s-=$(window).scrollTop(),$(".js-popup "+e).css({position:"",top:"",left:"",right:""}).css({position:"fixed",top:s,bottom:"auto",right:10,left:10})):$(".js-popup "+e).css({position:"",top:"",left:"",right:""}).css({position:"fixed",top:s,bottom:"auto",right:10,left:10}),a()}};$(".js-modal-open").on("click",function(){p=$(this),d="js-tpl",u=e(p,d);var s=$(".js-modal"),t=$(".js-modal "+u);$(".js-modal > .st-body").removeClass("is-current").css("margin-left",""),t.addClass("is-current");var o=t.outerWidth()/2;t.css("margin-left",-o),s.show(),$(".js-cartain").show(),$(".js-modal-close, .js-cartain").on("click",function(){s.hide(),$(".js-cartain").hide()})}),$(".js-message-open").on("click",function(){p=$(this),d="js-tpl",u=e(p,d),$(".js-message > .st-body").removeClass("is-open"),$(".js-message > "+u).addClass("is-open")}),$(".js-message-close").on("click",function(){$(".js-message > .st-body").removeClass("is-open")}),$(".js-toast-open").on("click",function(){p=$(this),d="js-tpl",u=e(p,d),clearTimeout(t);var s=$(".js-toast > "+u).css("margin-left","").show().outerWidth(!0)/2;$(".js-toast > "+u).css("margin-left",-s);var t;t=setTimeout(function(){$(".js-toast > "+u).fadeOut(700)},4e3),$(".js-toast-close").on("click",function(){$(".js-toast > "+u).hide(),clearTimeout(t)})}),$(".js-loader-on").on("click",function(){$(".js-loader").show()}),$(".js-loader-off").on("click",function(){$(".js-loader").hide()}),$(".js-loader-abs-on").on("click",function(){var s=$(this).offset(),e=s.top,t=s.left;$(".js-loader-abs > .st-body").css({top:"",left:""}).css({top:e,left:t}),$(".js-loader-abs").show()}),$(".js-loader-abs-off").on("click",function(){$(".js-loader-abs").hide()}),$(".js-collapse").on("click",function(){p=$(this),d="js-collapse-parent",u=e(p,d),u=u.replace("js-collapse-parent","js-collapse-child"),$(u).slideToggle();var s=$(this).children(),t=s.attr("class");if(t.match("down"))t=t.replace("down","up"),s.removeClass().addClass(t);else{if(!t.match("up"))return!1;t=t.replace("up","down"),s.removeClass().addClass(t)}}),$(".js-collapse-slide").on("click",function(){p=$(this),d="js-collapse-slide-parent",u=e(p,d),u=u.replace("js-collapse-slide-parent","js-collapse-slide-child"),$(u).stop().animate({width:"toggle"},300);var s=$(this).children(),t=s.attr("class");if(t.match("left"))t=t.replace("left","right"),s.removeClass().addClass(t);else{if(!t.match("right"))return!1;t=t.replace("right","left"),s.removeClass().addClass(t)}}),$(".js-tab-select > li").on("click",function(){var s=$(this).parents(".js-tab"),e=$(s).find(".js-tab-select").children("li"),t=$(s).find(".js-tab-content").children("li");e.removeClass("is-current"),$(this).addClass("is-current");var o=$(this).index();t.removeClass("is-current"),t.eq(o).addClass("is-current")}),$(".js-tab-scroll-select > li").on("click",function(){var s=$(this).parents(".js-tab-scroll"),e=$(s).find(".js-tab-scroll-select").children("li"),t=$(s).find(".js-tab-scroll-content").children("li");e.removeClass("is-current"),$(this).addClass("is-current");var o=$(this).index();t.removeClass("is-current"),t.eq(o).addClass("is-current")});var J=$(".js-tab-scroll"),K=J.length,N=$(".js-tab-scroll-select"),Q=$(".js-tab-scroll-select > li:visible"),U="is-disable",X=$(".js-tab-arrow-right"),Y=$(".js-tab-arrow-right"),Z=$(".js-tab-arrow-left"),_=$(".js-tab-arrow-left"),ss=400,es=74,ts=!1,os=!1,as=!1,is={tabSetStart:function(){var s=J.outerWidth(!0),e=s-es;N.width(is.tabWidthSum());var t=is.tabWidthSum();return t>e?(ns=t-e,Y.removeClass(U),ns):(Y.addClass(U),_.addClass(U),ns=0)},tabSetReset:function(){N.animate({left:0},0,function(){ns=is.tabSetStart(),ts=!0,_.addClass(U)})},tabWidthSum:function(){var s=Q.length,e=0,t=0;return Q.each(function(){e+=$(this).outerWidth(!0),t++,t===s&&(e+=7)}),e}};if(K){var ns=is.tabSetStart(),ls=!1;$(window).resize(function(){ls||clearTimeout(ls),ls=setTimeout(function(){is.tabSetReset()},40)}),X.on("click",function(){if(os)return!1;os=!0;var s=-ns,e=N.position();return e=e.left,e===s?(os=!1,!1):(_.removeClass(U),e-=ss,ts===!0&&(e=-ss,ts=!1),s>e&&(moveDiff=e-s,e-=moveDiff),void N.animate({left:e},400,function(){os=!1,e===s&&Y.addClass(U)}))}),Z.on("click",function(){if(as)return!1;as=!0;var s=0,e=N.position();return e=e.left,e===s?(as=!1,!1):(Y.removeClass(U),e+=ss,ts===!0&&(e=ss,ts=!1),e>s&&(moveDiff=e-s,e-=moveDiff),void N.animate({left:e},400,function(){as=!1,e===s&&_.addClass(U)}))})}$(".js-select-tr tr").on("click",function(){$(this).toggleClass("is-select")}),$(".js-col a").on("click",function(){var s=$(this).parents("li").index();$(".js-col-on colgroup col").removeClass("is-focus"),$(".js-col-on colgroup col").eq(s).addClass("is-focus")}),$(".js-sameclass td, .js-sameclass th").on({mouseenter:function(){var s="js-sameclass-num",t=$(this).attr("class");t&&t.match(s)&&(p=$(this),d=s,e(p,d),$(u).addClass("is-focus"))},mouseleave:function(){$(this).parents(".js-sameclass").find(".is-focus").removeClass("is-focus")}}),$(".js-check input").on("change",function(){var s=$(this).attr("class");if(s){var t=s.match("parent"),o=s.match("child");if(t){var a=$(this),i="js-check-parent-num",n=e(a,i);n=n.replace("parent","child");var l=$(this).prop("checked");l?$(n).prop("checked",!0):$(n).prop("checked",!1),rs.trHightLight(n)}if(o){var a=$(this),i="js-check-child-num",n=e(a,i);rs.trHightLight(n)}}});var rs={trHightLight:function(s){$("input"+s).parents("tr").removeClass("is-highlight"),$("input"+s+":checked").parents("tr").addClass("is-highlight")}},cs=[],ps=[];$(".js-html-show").on("click",function(){p=$(this),d="js-example-num",u=e(p,d);var s="../doc/"+u.replace(".js-example-num","")+".txt",t=u.slice(0,23).replace(".js-example-num",".js-example-tag-num"),o=$.inArray(u,cs),a=cs[cs.length-1],i=ps[ps.length-1];$.ajax({url:s,dataType:"text",success:function(s){var e=s.replace(/\r\n/g,"\n");-1===o?($(t+" textarea").text("").text(e),$(t).show(300),cs=[],cs.push(u)):u!==a?($(t+" textarea").text("").text(e),cs.push(u)):($(t).hide(300),cs=[]),t!==i&&($(i).hide(300),ps=[],ps.push(t))}})}),$(".js-nav-block a").on("click",function(){var s=$(this).parents(".js-nav-block");p=s,d="js-nav-block-select";var t=e(p,d);t=t.replace("select","content");var o=$(this).parent("li");s.find("li").removeClass("is-current"),o.addClass("is-current");var a=o.attr("class");if(a){var i=a.match("parent");i&&(p=o,d="js-nav-block-parent",u=e(p,d),u=u.replace("parent","child"),$(t).find("ul:eq(0)").children("li").hide(),$(t).find(u).fadeToggle())}}),$(".js-pagination li a").on("click",function(){var s=$(this).parents("li").hasClass("js-notouch");s||($(".js-pagination li").removeClass("is-current"),$(this).parent("li").addClass("is-current"))});var ds=$("#js-promo-footer");if(ds.length){var us,fs,hs,$s,ms,vs,ls,hs,js=300,gs=$("#js-promo-footer > .st-body"),Cs=$(".js-page-footer");ls=!1,$(window).resize(function(){ls||clearTimeout(ls),ls=setTimeout(function(){n()},40)}),Cs.length?$(window).scroll(function(){hs=i(),l()}):$(window).scroll(function(){r()}),n()}var ws=0;$(".js-aside-main-open").on("click",function(){ws++,1===ws&&($(".js-aside-main").addClass("is-transition").delay(500).addClass("is-open"),$(".js-page-contents:not(.js-aside-main)").on("click",function(){$(".js-aside-main").removeClass("is-open").delay(1e3).queue(function(){$(this).removeClass("is-transition").dequeue()}),ws=0,$(this).off()})),2===ws&&($(".js-aside-main").removeClass("is-open").delay(1e3).queue(function(){$(this).removeClass("is-transition").dequeue()}),ws=0)});var bs=0;$(".js-nav-slide-open").on("click",function(){bs++,1===bs&&($(".js-nav-slide").addClass("is-transition").delay(500).addClass("is-open"),$(".js-page-contents:not(.js-nav-slide)").on("click",function(){$(".js-nav-slide").removeClass("is-open").delay(1e3).queue(function(){$(this).removeClass("is-transition").dequeue()}),bs=0,$(this).off()})),2===bs&&($(".js-nav-slide").removeClass("is-open").delay(1e3).queue(function(){$(this).removeClass("is-transition").dequeue()}),bs=0)})});